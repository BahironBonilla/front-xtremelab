<!DOCTYPE html>
<html>

<head>
    <title>Cliente para la API de S3</title>
</head>

<body>
    <h2>Subir Archivo a S3</h2>
    <input type="file" id="fileInput">
    <button onclick="uploadFile()">Subir Archivo</button>

    <h2>Listar Archivos en S3</h2>
    <button onclick="listFiles()">Listar Archivos</button>
    <ul id="fileList"></ul>

    <h2>Eliminar Archivo de S3</h2>
    <input type="text" id="deleteFileName" placeholder="Nombre del archivo">
    <button onclick="deleteFile()">Eliminar Archivo</button>

    <script>
        function uploadFile() {

            alert("1");
            const fileInput = document.getElementById("fileInput");
            const file = fileInput.files[0];

            if (file) {
                alert("entro");
                const formData = new FormData();
                formData.append("file", file);

                fetch("/upload", {
                    method: "POST",
                    body: formData
                })
                    .then(response => response.json())
                    .then(data => {
                        alert(data.message);
                    })
                    .catch(error => {
                        alert("Error: " + error.message);
                    });
            }
        }

        function listFiles() {
            fetch("/list")
                .then(response => response.json())
                .then(data => {
                    const fileList = document.getElementById("fileList");
                    fileList.innerHTML = "";
                    data.files.forEach(file => {
                        const listItem = document.createElement("li");
                        listItem.textContent = file;
                        fileList.appendChild(listItem);
                    });
                })
                .catch(error => {
                    alert("Error: " + error.message);
                });
        }

        function deleteFile() {
            const deleteFileName = document.getElementById("deleteFileName").value;

            fetch(`/delete/${deleteFileName}`, {
                method: "DELETE"
            })
                .then(response => response.json())
                .then(data => {
                    alert(data.message);
                })
                .catch(error => {
                    alert("Error: " + error.message);
                });
        }
    </script>
</body>

</html>